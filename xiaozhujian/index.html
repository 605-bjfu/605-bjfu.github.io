<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>贪吃蛇游戏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #02ff52, #4c2dfd);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* 全局页眉样式 */
        .global-header {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            color: #bf00ff;
        }
        
        .logo-text {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
            padding: 10px;
            border-radius: 10px;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }
        
        .nav-icon {
            font-size: 1.5rem;
            color: #fd2dd3;
        }
        
        .nav-text {
            font-size: 0.9rem;
        }
        
        /* 游戏容器 */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            padding: 20px;
            gap: 20px;
        }
        
        .game-header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .game-area {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 500px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .snake_body {
            list-style: none;
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .cube {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #bff;
            border-radius: 4px;
            transition: all 0.1s ease;
        }
        
        .cube.head {
            background-color: rgb(4, 147, 250);
            z-index: 10;
            box-shadow: 0 0 10px rgba(4, 147, 250, 0.7);
        }
        
        .food {
            width: 20px;
            height: 20px;
            background-color: lightcoral;
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(240, 128, 128, 0.7);
            z-index: 5;
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 800px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .score {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .instructions {
            text-align: center;
            margin-top: 10px;
            font-size: 1rem;
            opacity: 0.8;
        }
        
        /* 全局页脚样式 */
        .global-footer {
            background: rgba(0, 0, 0, 0.5);
            padding: 25px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 20px;
        }
        
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 0 20px;
        }
        
        .footer-links {
            display: flex;
            gap: 30px;
            margin-bottom: 10px;
        }
        
        .footer-link {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-link:hover {
            color: #fdbb2d;
        }
        
        .footer-text {
            text-align: center;
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        .social-links {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            background: #fdbb2d;
            transform: translateY(-3px);
        }
        
        @media (max-width: 1024px) {
            .game-area {
                height: 400px;
            }
            
            .nav-links {
                gap: 15px;
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .game-info {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- 全局页眉 -->
    <header class="global-header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="logo-text">贪吃蛇游戏</div>
            </div>
            <div class="nav-links">
                <a href="https://605-bjfu.github.io/" class="nav-link">
                    <div class="nav-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="nav-text">首页</div>
                </a>
                <a href="https://605-bjfu.github.io/" class="nav-link">
                    <div class="nav-icon">
                        <i class="fa fa-history"></i>
                    </div>
                    <div class="nav-text">时间轴</div>
                </a>
                <a href="https://605-bjfu.github.io/xiaozhujian" class="nav-link">
                    <div class="nav-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="nav-text">小组件</div>
                </a>
            </div>
        </div>
    </header>
    
    <!-- 游戏区域 -->
    <div class="game-container">
        <div class="game-header">
            <h1>贪吃蛇游戏</h1>
            <p class="subtitle">使用方向键控制小蛇移动，吃到食物增加长度，碰到墙壁或自己游戏结束</p>
        </div>
        
        <div class="game-area">
            <ul class="snake_body">
                <!-- 小蛇身体将通过JavaScript动态生成 -->
            </ul>
        </div>
        
        <div class="game-info">
            <div class="score">得分: <span id="score">0</span></div>
            <div class="controls">
                <button class="control-btn" id="restartBtn">重新开始</button>
                <button class="control-btn" id="pauseBtn">暂停</button>
            </div>
        </div>
        
        <p class="instructions">使用键盘方向键 ↑ ↓ ← → 控制小蛇移动</p>
    </div>
    
    <!-- 全局页脚 -->
    <footer class="global-footer">
        <div class="footer-content">
            <div class="social-links">
                <a href="https://github.com/605-bjfu" class="social-link">
                    <i class="fab fa-github"></i>
                </a>
            </div>
            <div class="footer-text">
                <p>© 2025 贪吃蛇游戏 | 经典小游戏在线版</p>
            </div>
        </div>
    </footer>

    <script>
        // 获取DOM元素
        const gameArea = document.querySelector('.game-area');
        const snakeBody = document.querySelector('.snake_body');
        const scoreElement = document.getElementById('score');
        const restartBtn = document.getElementById('restartBtn');
        const pauseBtn = document.getElementById('pauseBtn');

        // 游戏状态变量
        let snake_arr = [
            { id: 0, left: 100, top: 100, move_direction: 'r' },
            { id: 1, left: 80, top: 100 },
            { id: 2, left: 60, top: 100 }
        ];
        let gameRunning = true;
        let gamePaused = false;
        let score = 0;
        let autoMove;
        let foodElement = null;

        // 初始化游戏
        function initGame() {
            // 清除现有元素
            snakeBody.innerHTML = '';
            if (foodElement) {
                foodElement.remove();
                foodElement = null;
            }
            
            // 重置游戏状态
            snake_arr = [
                { id: 0, left: 100, top: 100, move_direction: 'r' },
                { id: 1, left: 80, top: 100 },
                { id: 2, left: 60, top: 100 }
            ];
            score = 0;
            scoreElement.textContent = score;
            gameRunning = true;
            gamePaused = false;
            pauseBtn.textContent = '暂停';
            
            // 渲染初始小蛇
            renderSnake();
            
            // 生成食物
            createFood();
            
            // 开始游戏循环
            if (autoMove) clearInterval(autoMove);
            autoMove = setInterval(snakeMove, 150);
            
            // 开始检测游戏状态
            checkGameStatus();
        }

        // 渲染小蛇
        function renderSnake() {
            // 从后往前向ul里面添加li标签
            for (let i = snake_arr.length - 1; i >= 0; i--) {
                let li = document.createElement('li');
                li.classList.add('cube');
                
                // 第一个是小蛇的头部
                if (snake_arr[i].id === 0) {
                    li.classList.add('head');
                }
                
                li.style.left = snake_arr[i].left + 'px';
                li.style.top = snake_arr[i].top + 'px';
                snakeBody.appendChild(li);
            }
        }

        // 小蛇移动
        function snakeMove() {
            if (!gameRunning || gamePaused) return;
            
            let direction = snake_arr[0].move_direction;
            
            // 移动身体部分
            for (let i = snake_arr.length - 1; i >= 1; i--) {
                snake_arr[i].left = snake_arr[i - 1].left;
                snake_arr[i].top = snake_arr[i - 1].top;
            }
            
            // 移动头部
            switch (direction) {
                case 'l':
                    snake_arr[0].left -= 20;
                    break;
                case 'r':
                    snake_arr[0].left += 20;
                    break;
                case 'u':
                    snake_arr[0].top -= 20;
                    break;
                case 'd':
                    snake_arr[0].top += 20;
                    break;
            }
            
            // 重新渲染小蛇
            snakeBody.innerHTML = '';
            renderSnake();
            
            // 检查是否吃到食物
            checkFoodCollision();
        }

        // 创建食物
        function createFood() {
            if (foodElement) {
                foodElement.remove();
            }
            
            // 计算可用的位置
            const maxLeft = Math.floor(gameArea.offsetWidth / 20) - 1;
            const maxTop = Math.floor(gameArea.offsetHeight / 20) - 1;
            
            let validPosition = false;
            let foodLeft, foodTop;
            
            // 确保食物不会生成在小蛇身上
            while (!validPosition) {
                foodLeft = Math.floor(Math.random() * maxLeft) * 20;
                foodTop = Math.floor(Math.random() * maxTop) * 20;
                
                validPosition = true;
                for (let segment of snake_arr) {
                    if (segment.left === foodLeft && segment.top === foodTop) {
                        validPosition = false;
                        break;
                    }
                }
            }
            
            foodElement = document.createElement('div');
            foodElement.classList.add('food');
            foodElement.style.left = foodLeft + 'px';
            foodElement.style.top = foodTop + 'px';
            gameArea.appendChild(foodElement);
        }

        // 检查是否吃到食物
        function checkFoodCollision() {
            if (!foodElement) return;
            
            const head = snake_arr[0];
            const foodLeft = parseInt(foodElement.style.left);
            const foodTop = parseInt(foodElement.style.top);
            
            if (head.left === foodLeft && head.top === foodTop) {
                // 吃到食物，增加分数和身体长度
                score += 10;
                scoreElement.textContent = score;
                addBody();
                createFood();
            }
        }

        // 增加身体长度
        function addBody() {
            const lastSegment = snake_arr[snake_arr.length - 1];
            snake_arr.push({
                id: snake_arr.length,
                left: lastSegment.left,
                top: lastSegment.top
            });
        }

        // 检查游戏状态
        function checkGameStatus() {
            const checkInterval = setInterval(() => {
                if (!gameRunning) {
                    clearInterval(checkInterval);
                    return;
                }
                
                const head = snake_arr[0];
                
                // 检查是否撞墙
                if (
                    head.left < 0 || 
                    head.left >= gameArea.offsetWidth || 
                    head.top < 0 || 
                    head.top >= gameArea.offsetHeight
                ) {
                    endGame('撞墙了！游戏结束！');
                    clearInterval(checkInterval);
                    return;
                }
                
                // 检查是否撞到自己
                for (let i = 1; i < snake_arr.length; i++) {
                    if (head.left === snake_arr[i].left && head.top === snake_arr[i].top) {
                        endGame('咬到自己了！游戏结束！');
                        clearInterval(checkInterval);
                        return;
                    }
                }
            }, 100);
        }

        // 结束游戏
        function endGame(message) {
            gameRunning = false;
            clearInterval(autoMove);
            setTimeout(() => {
                alert(message + ' 最终得分: ' + score);
            }, 100);
        }

        // 方向控制
        let lock = false;
        function changeDirection(key) {
            if (!lock && gameRunning && !gamePaused) {
                lock = true;
                
                const currentDirection = snake_arr[0].move_direction;
                let newDirection;
                
                switch (key) {
                    case 'ArrowLeft':
                        newDirection = 'l';
                        break;
                    case 'ArrowRight':
                        newDirection = 'r';
                        break;
                    case 'ArrowUp':
                        newDirection = 'u';
                        break;
                    case 'ArrowDown':
                        newDirection = 'd';
                        break;
                    default:
                        lock = false;
                        return;
                }
                
                // 防止直接反向移动
                if (
                    (currentDirection === 'l' && newDirection !== 'r') ||
                    (currentDirection === 'r' && newDirection !== 'l') ||
                    (currentDirection === 'u' && newDirection !== 'd') ||
                    (currentDirection === 'd' && newDirection !== 'u')
                ) {
                    snake_arr[0].move_direction = newDirection;
                }
                
                setTimeout(() => {
                    lock = false;
                }, 50);
            }
        }

        // 事件监听
        window.addEventListener('keydown', (e) => {
            if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(e.key)) {
                e.preventDefault(); // 防止方向键滚动页面
                changeDirection(e.key);
            }
        });

        restartBtn.addEventListener('click', initGame);
        
        pauseBtn.addEventListener('click', () => {
            if (gameRunning) {
                gamePaused = !gamePaused;
                pauseBtn.textContent = gamePaused ? '继续' : '暂停';
            }
        });

        // 初始化游戏
        initGame();
    </script>
</body>
</html>